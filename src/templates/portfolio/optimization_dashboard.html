{% extends "base.html" %}
{% load static %}

{% block title %}Portfolio Optimization - Phase 1{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h1>Portfolio Optimization - Phase 1</h1>
            <p class="text-muted">Complete account inventory, risk assessment, and portfolio audit</p>
        </div>
    </div>

    <!-- Progress Overview -->
    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Account Inventory</h5>
                    {% if has_accounts %}
                        <span class="badge bg-success">Complete</span>
                        <p class="mt-2">{{ total_accounts }} account{{ total_accounts|pluralize }} added</p>
                        <a href="{% url 'portfolio:account_inventory' %}" class="btn btn-sm btn-primary">View Accounts</a>
                    {% else %}
                        <span class="badge bg-warning">Pending</span>
                        <p class="mt-2">No accounts added yet</p>
                        <a href="{% url 'portfolio:account_inventory' %}" class="btn btn-sm btn-primary">Add Accounts</a>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Risk Assessment</h5>
                    {% if has_risk_profile %}
                        <span class="badge bg-success">Complete</span>
                        <p class="mt-2">Risk profile configured</p>
                        <a href="{% url 'portfolio:risk_assessment' %}" class="btn btn-sm btn-primary">View Profile</a>
                    {% else %}
                        <span class="badge bg-warning">Pending</span>
                        <p class="mt-2">Risk assessment not completed</p>
                        <a href="{% url 'portfolio:risk_assessment' %}" class="btn btn-sm btn-primary">Start Assessment</a>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Portfolio Audit</h5>
                    {% if has_audit %}
                        <span class="badge bg-success">Complete</span>
                        <p class="mt-2">Latest audit: {{ latest_audit.audit_date }}</p>
                        <a href="{% url 'portfolio:audit_list' %}" class="btn btn-sm btn-primary">View Audits</a>
                    {% else %}
                        <span class="badge bg-warning">Pending</span>
                        <p class="mt-2">Portfolio audit not completed</p>
                        <a href="{% url 'portfolio:audit_create' %}" class="btn btn-sm btn-primary">Start Audit</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Phase 1 Status -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Phase 1 Status</h5>
                    {% if phase1_complete %}
                        <div class="alert alert-success">
                            <strong>âœ… Phase 1 Complete!</strong> All tasks completed. Ready for Phase 2.
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            <strong>ðŸŸ¡ Phase 1 In Progress</strong> Complete all three sections to finish Phase 1.
                        </div>
                        <div class="progress mt-3">
                            <div class="progress-bar" role="progressbar" style="width: {% if phase1_complete %}100{% else %}{% widthratio total_accounts|add:has_risk_profile|add:has_audit 3 100 %}{% endif %}%">
                                {% if phase1_complete %}100{% else %}{% widthratio total_accounts|add:has_risk_profile|add:has_audit 3 100 %}{% endif %}%
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mt-4">
        <div class="col-12">
            <h3>Quick Actions</h3>
            <div class="btn-group" role="group">
                <a href="{% url 'portfolio:account_inventory' %}" class="btn btn-outline-primary">Manage Accounts</a>
                <a href="{% url 'portfolio:risk_assessment' %}" class="btn btn-outline-primary">Risk Assessment</a>
                <a href="{% url 'portfolio:audit_list' %}" class="btn btn-outline-primary">Portfolio Audits</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

